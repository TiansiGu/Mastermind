{"ast":null,"code":"import _slicedToArray from\"/Users/tiansigu/Documents/CS514/Project4/react-gcp-app-engine/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{initializeApp}from\"firebase/app\";import{getAuth,signInWithRedirect,GoogleAuthProvider,signInWithPopup}from\"firebase/auth\";import React,{useState,useEffect}from\"react\";// LoginSuccessful is a function sent in by parent component\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LoginForm(_ref){var LoginEvent=_ref.LoginEvent;var firebaseConfig={apiKey:\"AIzaSyDwDAW1JEl8hNManD4jYSlJXHxa5RCjOQ0\",authDomain:\"bookstore-user-login.firebaseapp.com\",projectId:\"bookstore-user-login\",storageBucket:\"bookstore-user-login.appspot.com\",messagingSenderId:\"570693469610\",appId:\"1:570693469610:web:9b5b6dd3aa2c37862d97d3\"};initializeApp(firebaseConfig);var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),loggedUser=_useState2[0],setLoggedUser=_useState2[1];// function to sign in with Google's page\nvar signInWithGoogle=function signInWithGoogle(){var provider=new GoogleAuthProvider();var auth=getAuth();signInWithPopup(auth,provider).then(function(result){// User signed in\nconsole.log(result.user);setLoggedUser(result.user);}).catch(function(error){// Handle Errors here.\nconsole.error(error);});};// function to sign out\nfunction logoutGoogle(){var auth=getAuth();auth.signOut();setLoggedUser(null);}// we put the onAuthStateChanged in useEffect so this is only called when\n// this component mounts\nuseEffect(function(){var auth=getAuth();auth.onAuthStateChanged(function(user){if(user){// User is signed in.\nconsole.log(\"User is signed in:\",user);setLoggedUser(user);}else{// No user is signed in.\nconsole.log(\"No user is signed in.\");}var userId=user?user.uid:\"\";LoginEvent(user,userId);});},[]);// note the ? to show either login or logout button\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"log\",children:loggedUser?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:logoutGoogle,children:\"Log out\"}),\" \"]}):/*#__PURE__*/_jsx(\"button\",{onClick:signInWithGoogle,children:\"Sign in with Google\"})});}export default LoginForm;","map":{"version":3,"names":["initializeApp","getAuth","signInWithRedirect","GoogleAuthProvider","signInWithPopup","React","useState","useEffect","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","LoginForm","_ref","LoginEvent","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","_useState","_useState2","_slicedToArray","loggedUser","setLoggedUser","signInWithGoogle","provider","auth","then","result","console","log","user","catch","error","logoutGoogle","signOut","onAuthStateChanged","userId","uid","className","children","onClick"],"sources":["/Users/tiansigu/Documents/CS514/Project4/react-gcp-app-engine/src/Components/LoginForm.js"],"sourcesContent":["import { initializeApp } from \"firebase/app\";\nimport {\n  getAuth,\n  signInWithRedirect,\n  GoogleAuthProvider,\n  signInWithPopup,\n} from \"firebase/auth\";\nimport React, { useState, useEffect } from \"react\";\n\n// LoginSuccessful is a function sent in by parent component\nfunction LoginForm({ LoginEvent }) {\n  const firebaseConfig = {\n    apiKey: \"AIzaSyDwDAW1JEl8hNManD4jYSlJXHxa5RCjOQ0\",\n    authDomain: \"bookstore-user-login.firebaseapp.com\",\n    projectId: \"bookstore-user-login\",\n    storageBucket: \"bookstore-user-login.appspot.com\",\n    messagingSenderId: \"570693469610\",\n    appId: \"1:570693469610:web:9b5b6dd3aa2c37862d97d3\",\n  };\n\n  initializeApp(firebaseConfig);\n\n  const [loggedUser, setLoggedUser] = useState(\"\");\n\n  // function to sign in with Google's page\n  const signInWithGoogle = () => {\n    const provider = new GoogleAuthProvider();\n    const auth = getAuth();\n    signInWithPopup(auth, provider)\n      .then((result) => {\n        // User signed in\n        console.log(result.user);\n        setLoggedUser(result.user);\n      })\n      .catch((error) => {\n        // Handle Errors here.\n        console.error(error);\n      });\n  };\n\n  // function to sign out\n  function logoutGoogle() {\n    const auth = getAuth();\n    auth.signOut();\n    setLoggedUser(null);\n  }\n\n  // we put the onAuthStateChanged in useEffect so this is only called when\n  // this component mounts\n  useEffect(() => {\n    const auth = getAuth();\n    auth.onAuthStateChanged((user) => {\n      if (user) {\n        // User is signed in.\n        console.log(\"User is signed in:\", user);\n\n        setLoggedUser(user);\n      } else {\n        // No user is signed in.\n        console.log(\"No user is signed in.\");\n      }\n      let userId = user ? user.uid : \"\";\n      LoginEvent(user, userId);\n    });\n  }, []);\n  // note the ? to show either login or logout button\n  return (\n    <div className=\"log\">\n      {loggedUser ? (\n        <>\n          {/* <p>user: {loggedUser.uid}</p>{\" \"} */}\n          <button onClick={logoutGoogle}>Log out</button>{\" \"}\n        </>\n      ) : (\n        <button onClick={signInWithGoogle}>Sign in with Google</button>\n      )}\n    </div>\n  );\n}\nexport default LoginForm;\n"],"mappings":"mJAAA,OAASA,aAAa,KAAQ,cAAc,CAC5C,OACEC,OAAO,CACPC,kBAAkB,CAClBC,kBAAkB,CAClBC,eAAe,KACV,eAAe,CACtB,MAAO,CAAAC,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAElD;AAAA,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,QAAA,IAAAC,SAAA,gCAAAC,IAAA,IAAAC,KAAA,yBACA,QAAS,CAAAC,SAASA,CAAAC,IAAA,CAAiB,IAAd,CAAAC,UAAU,CAAAD,IAAA,CAAVC,UAAU,CAC7B,GAAM,CAAAC,cAAc,CAAG,CACrBC,MAAM,CAAE,yCAAyC,CACjDC,UAAU,CAAE,sCAAsC,CAClDC,SAAS,CAAE,sBAAsB,CACjCC,aAAa,CAAE,kCAAkC,CACjDC,iBAAiB,CAAE,cAAc,CACjCC,KAAK,CAAE,2CACT,CAAC,CAEDvB,aAAa,CAACiB,cAAc,CAAC,CAE7B,IAAAO,SAAA,CAAoClB,QAAQ,CAAC,EAAE,CAAC,CAAAmB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAzCG,UAAU,CAAAF,UAAA,IAAEG,aAAa,CAAAH,UAAA,IAEhC;AACA,GAAM,CAAAI,gBAAgB,CAAG,QAAnB,CAAAA,gBAAgBA,CAAA,CAAS,CAC7B,GAAM,CAAAC,QAAQ,CAAG,GAAI,CAAA3B,kBAAkB,CAAC,CAAC,CACzC,GAAM,CAAA4B,IAAI,CAAG9B,OAAO,CAAC,CAAC,CACtBG,eAAe,CAAC2B,IAAI,CAAED,QAAQ,CAAC,CAC5BE,IAAI,CAAC,SAACC,MAAM,CAAK,CAChB;AACAC,OAAO,CAACC,GAAG,CAACF,MAAM,CAACG,IAAI,CAAC,CACxBR,aAAa,CAACK,MAAM,CAACG,IAAI,CAAC,CAC5B,CAAC,CAAC,CACDC,KAAK,CAAC,SAACC,KAAK,CAAK,CAChB;AACAJ,OAAO,CAACI,KAAK,CAACA,KAAK,CAAC,CACtB,CAAC,CAAC,CACN,CAAC,CAED;AACA,QAAS,CAAAC,YAAYA,CAAA,CAAG,CACtB,GAAM,CAAAR,IAAI,CAAG9B,OAAO,CAAC,CAAC,CACtB8B,IAAI,CAACS,OAAO,CAAC,CAAC,CACdZ,aAAa,CAAC,IAAI,CAAC,CACrB,CAEA;AACA;AACArB,SAAS,CAAC,UAAM,CACd,GAAM,CAAAwB,IAAI,CAAG9B,OAAO,CAAC,CAAC,CACtB8B,IAAI,CAACU,kBAAkB,CAAC,SAACL,IAAI,CAAK,CAChC,GAAIA,IAAI,CAAE,CACR;AACAF,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAEC,IAAI,CAAC,CAEvCR,aAAa,CAACQ,IAAI,CAAC,CACrB,CAAC,IAAM,CACL;AACAF,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC,CACtC,CACA,GAAI,CAAAO,MAAM,CAAGN,IAAI,CAAGA,IAAI,CAACO,GAAG,CAAG,EAAE,CACjC3B,UAAU,CAACoB,IAAI,CAAEM,MAAM,CAAC,CAC1B,CAAC,CAAC,CACJ,CAAC,CAAE,EAAE,CAAC,CACN;AACA,mBACEjC,IAAA,QAAKmC,SAAS,CAAC,KAAK,CAAAC,QAAA,CACjBlB,UAAU,cACTd,KAAA,CAAAF,SAAA,EAAAkC,QAAA,eAEEpC,IAAA,WAAQqC,OAAO,CAAEP,YAAa,CAAAM,QAAA,CAAC,SAAO,CAAQ,CAAC,CAAC,GAAG,EACnD,CAAC,cAEHpC,IAAA,WAAQqC,OAAO,CAAEjB,gBAAiB,CAAAgB,QAAA,CAAC,qBAAmB,CAAQ,CAC/D,CACE,CAAC,CAEV,CACA,cAAe,CAAA/B,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}