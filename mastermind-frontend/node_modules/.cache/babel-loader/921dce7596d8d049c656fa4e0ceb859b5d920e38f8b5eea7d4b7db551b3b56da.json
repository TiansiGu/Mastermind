{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tiansigu/Documents/CS514/Project4/react-gcp-app-engine/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/tiansigu/Documents/CS514/Project4/react-gcp-app-engine/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/tiansigu/Documents/CS514/Project4/react-gcp-app-engine/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import\"./StartPage.css\";import axios from\"axios\";import LoginForm from\"../Components/LoginForm\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var StartPage=function StartPage(_ref){var onHandleChange=_ref.onHandleChange,onUserIdChange=_ref.onUserIdChange;// user is the currently logged in user\nvar _useState=useState(null),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),userId=_useState4[0],setUserId=_useState4[1];// this will be called by the LoginForm\nvar HandleLogin=function HandleLogin(user,userId){setUser(user);//after execution, user is an object, not null\nsetUserId(userId);onUserIdChange(userId);console.log(\"The current userId is \"+userId);};var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),handle=_useState6[0],setHandle=_useState6[1];var handleNameChange=function handleNameChange(event){setHandle(event.target.value);};var handleStartClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!handle){_context.next=6;break;}_context.next=3;return onHandleChange(handle);case 3:handleSubmitHandle();_context.next=7;break;case 6:alert(\"You need to enter a handle before starting the game\");case 7:case\"end\":return _context.stop();}},_callee);}));return function handleStartClick(){return _ref2.apply(this,arguments);};}();// function to handle the user submit of a new handle\nfunction handleSubmitHandle(){return _handleSubmitHandle.apply(this,arguments);}function _handleSubmitHandle(){_handleSubmitHandle=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var postData,response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:postData={userId:userId,handle:handle};_context2.prev=1;_context2.next=4;return axios.post(\"https://mastermind-backend-tiansi.wl.r.appspot.com/user/saveOrUpdateHandle\",postData);case 4:response=_context2.sent;console.log(\"Response:\",response.data);_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);console.error(\"Error posting data:\",_context2.t0);case 11:case\"end\":return _context2.stop();}},_callee2,null,[[1,8]]);}));return _handleSubmitHandle.apply(this,arguments);}return/*#__PURE__*/_jsx(\"div\",{className:\"startpage-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"input-inner-box\",children:/*#__PURE__*/_jsx(LoginForm,{LoginEvent:HandleLogin})}),user&&/*#__PURE__*/_jsxs(\"div\",{className:\"input-inner-box\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter your name\",value:handle,onChange:handleNameChange}),/*#__PURE__*/_jsx(\"button\",{onClick:handleStartClick,children:\"Start Game\"})]})]})});};export default StartPage;","map":{"version":3,"names":["React","useState","axios","LoginForm","jsx","_jsx","jsxs","_jsxs","StartPage","_ref","onHandleChange","onUserIdChange","_useState","_useState2","_slicedToArray","user","setUser","_useState3","_useState4","userId","setUserId","HandleLogin","console","log","_useState5","_useState6","handle","setHandle","handleNameChange","event","target","value","handleStartClick","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","handleSubmitHandle","alert","stop","apply","arguments","_handleSubmitHandle","_callee2","postData","response","_callee2$","_context2","post","sent","data","t0","error","className","children","LoginEvent","type","placeholder","onChange","onClick"],"sources":["/Users/tiansigu/Documents/CS514/Project4/react-gcp-app-engine/src/Pages/StartPage.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport \"./StartPage.css\";\nimport axios from \"axios\";\n\nimport LoginForm from \"../Components/LoginForm\";\n\nconst StartPage = ({ onHandleChange, onUserIdChange }) => {\n  // user is the currently logged in user\n  const [user, setUser] = useState(null);\n  const [userId, setUserId] = useState(\"\");\n\n  // this will be called by the LoginForm\n  const HandleLogin = (user, userId) => {\n    setUser(user); //after execution, user is an object, not null\n    setUserId(userId);\n    onUserIdChange(userId);\n    console.log(\"The current userId is \" + userId);\n  };\n\n  const [handle, setHandle] = useState(\"\");\n\n  const handleNameChange = (event) => {\n    setHandle(event.target.value);\n  };\n\n  const handleStartClick = async () => {\n    if (handle) {\n      await onHandleChange(handle);\n      handleSubmitHandle();\n    } else {\n      alert(\"You need to enter a handle before starting the game\");\n    }\n  };\n\n  // function to handle the user submit of a new handle\n  async function handleSubmitHandle() {\n    const postData = {\n      userId,\n      handle,\n    };\n\n    try {\n      const response = await axios.post(\n        \"https://mastermind-backend-tiansi.wl.r.appspot.com/user/saveOrUpdateHandle\",\n        postData\n      );\n      console.log(\"Response:\", response.data);\n    } catch (error) {\n      console.error(\"Error posting data:\", error);\n    }\n  }\n\n  return (\n    <div className=\"startpage-container\">\n      <div className=\"input-box\">\n        <div className=\"input-inner-box\">\n          <LoginForm LoginEvent={HandleLogin} />\n        </div>\n\n        {user && (\n          <div className=\"input-inner-box\">\n            <input\n              type=\"text\"\n              placeholder=\"Enter your name\"\n              value={handle}\n              onChange={handleNameChange}\n            />\n            <button onClick={handleStartClick}>Start Game</button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default StartPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}